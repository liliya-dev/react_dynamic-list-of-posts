{"version":3,"sources":["api.ts","ButtonLoading.tsx","Comment.tsx","Post.tsx","PostsList.tsx","DynamicPostsApp.tsx","App.tsx","index.tsx"],"names":["fetchData","url","a","fetch","response","json","data","ButtonLoading","handleSetIsLoading","loadFromServer","findComments","id","comments","filter","comment","postId","users","posts","findAuthor","userId","person","find","user","address","Object","entries","slice","map","option","join","name","email","preparedPosts","post","author","className","onClick","type","CommentItem","body","href","PostItem","title","key","PostsList","uuid","DynamicPostsApp","useState","isLoading","setIsLoading","isFetched","setIsFetched","inputValue","setInputValue","postsList","setPostsList","filteredList","setFilteredList","state","list","placeholder","value","onChange","event","currentTarget","filtered","includes","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.42eae09b.chunk.js","sourcesContent":["export const URLPosts = 'https://mate-academy.github.io/react_dynamic-list-of-posts/api/posts.json';\nexport const URLUsers = 'https://mate-academy.github.io/react_dynamic-list-of-posts/api/users.json';\nexport const URLComments = 'https://mate-academy.github.io/react_dynamic-list-of-posts/api/comments.json';\n\nexport const fetchData = async <T>(url: string): Promise<T[]> => {\n  const response = await fetch(url);\n  const data = await response.json();\n\n  return data;\n};\n","import React from 'react';\nimport {\n  fetchData, URLComments, URLPosts, URLUsers,\n} from './api';\nimport {\n  Comment, PostFromServer, User, Post,\n} from './interfaces';\n\ninterface Props {\n  handleSetIsLoading: (state: string, list: Post[]) => (void);\n};\n\nexport const ButtonLoading: React.FC<Props> = ({ handleSetIsLoading }) => {\n  const loadFromServer = async () => {\n    handleSetIsLoading('isLoadingNow', []);\n    const users = await fetchData<User>(URLUsers);\n    const posts = await fetchData<PostFromServer >(URLPosts);\n    const comments = await fetchData<Comment>(URLComments);\n\n    const findAuthor = (userId: number) => {\n      const person: User | undefined = users.find(user => user.id === userId);\n\n      if (person) {\n        const address = Object.entries(person.address)\n          .slice(0, 4)\n          .map(option => option.join(' : '))\n          .join(', ');\n\n        return [person.name, person.email, address];\n      }\n\n      return [];\n    };\n\n    function findComments(id: number) {\n      return comments.filter(comment => comment.postId === id);\n    }\n\n    const preparedPosts: Post[] = posts.map((post) => {\n      const [author, email, address] = findAuthor(post.userId);\n\n      return {\n        ...post,\n        author,\n        email,\n        address,\n        comments: findComments(post.id),\n      };\n    });\n\n    handleSetIsLoading('completed', preparedPosts);\n  };\n\n  return (\n    <button className=\"btn btn-info ml\" onClick={loadFromServer} type=\"button\">Load posts</button>\n  );\n};\n","import React from 'react';\nimport { Comment } from './interfaces';\n\ninterface Props {\n  comment: Comment;\n}\n\nexport const CommentItem: React.FC<Props> = ({ comment }) => (\n  <li className=\"comment\">\n    <p>{comment.name}</p>\n    <p className=\"comment__body\">{comment.body}</p>\n    <a className=\"mail\" href=\"mailto:1111@mail.ru\">{comment.email}</a>\n  </li>\n);\n","import React from 'react';\nimport { Post } from './interfaces';\nimport { CommentItem } from './Comment';\n\ninterface Props {\n  post: Post;\n}\n\nexport const PostItem: React.FC<Props> = ({ post }) => (\n  <li className=\"post shadow-lg p-3 mb-5 bg-white font-italic\">\n    <h4 className=\"post__title\">{post.title}</h4>\n    <p>{post.body}</p>\n    <div className=\"wrapper\">\n      <div className=\"box-l\">\n        <p className=\"post__title\">\n          Post by\n          &nbsp;\n          {post.author}\n        </p>\n      </div>\n      <div className=\"box-r\">\n        <a className=\"mail\" href=\"mailto:1111@mail.ru\">\n          Email:\n          &nbsp;\n          {post.email}\n        </a>\n        <p>\n          Address\n          &nbsp;\n          {post.address}\n        </p>\n      </div>\n    </div>\n    <ul>\n      {\n        post.comments.map(comment => <CommentItem key={comment.id} comment={comment} />)\n      }\n    </ul>\n  </li>\n);\n","import React from 'react';\nimport { uuid } from 'uuidv4';\nimport { Post } from './interfaces';\nimport { PostItem } from './Post';\n\ninterface Props {\n  posts: Post[];\n}\n\nexport const PostsList: React.FC<Props> = ({ posts }) => (\n  <ul className=\"posts\">\n    {\n      posts.map(post => <PostItem key={uuid()} post={post} />)\n    }\n  </ul>\n);\n","import React, { useState } from 'react';\nimport { ButtonLoading } from './ButtonLoading';\nimport { Post } from './interfaces';\nimport { PostsList } from './PostsList';\n\nexport const DynamicPostsApp: React.FC = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [isFetched, setIsFetched] = useState(false);\n  const [inputValue, setInputValue] = useState('');\n  const [postsList, setPostsList] = useState<Post[]>([]);\n  const [filteredList, setFilteredList] = useState<Post[]>([]);\n  const handleSetIsLoading = (state: string, list: Post[]) => {\n    if (state === 'isLoadingNow') {\n      setIsLoading(true);\n    } else {\n      setIsFetched(true);\n      setIsLoading(false);\n      setPostsList(list);\n      setFilteredList(list);\n    }\n  };\n\n  const filterPosts = (event: React.FormEvent<HTMLInputElement>) => {\n    const { value } = event.currentTarget;\n\n    setInputValue(value);\n    const filtered = postsList.filter(post => post.title.includes(value)\n    || post.body.includes(value));\n\n    setFilteredList(filtered);\n  };\n\n  return (\n    <>\n      {\n        !isLoading && !isFetched && <ButtonLoading handleSetIsLoading={handleSetIsLoading} />\n      }\n      {\n        isLoading && !isFetched && <p className=\"ml mail\">Loading ...</p>\n      }\n      {\n        !isLoading && isFetched\n          && (\n            <>\n              <div className=\"input-field col s12\">\n                <input\n                  className=\"input validate\"\n                  id=\"text\"\n                  placeholder=\"Search\"\n                  type=\"text\"\n                  value={inputValue}\n                  onChange={filterPosts}\n                />\n              </div>\n\n              <PostsList posts={filteredList} />\n            </>\n          )\n      }\n    </>\n  );\n};\n","import React from 'react';\nimport './App.css';\nimport { DynamicPostsApp } from './DynamicPostsApp';\n\nconst App: React.FC = () => {\n  return (\n    <section>\n      <DynamicPostsApp />\n    </section>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}